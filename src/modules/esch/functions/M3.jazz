inline
fn l(reg u32 x) -> reg u32{
  reg u32 shifted_x;

  shifted_x = x;
  shifted_x <<r= 16;

  x &= 0xFFFF;

  x ^= shifted_x;

  return x;
}

inline
fn M3(reg ptr u32[6] tab) -> reg ptr u32[6] {
  reg u32 t_x, t_y;

  t_x = tab[0];
  t_x ^= tab[2];
  t_y = tab[1];
  t_y ^= tab[3];

  t_x = l(t_x);
  t_y = l(t_y);

  tab[0] ^= t_x;
  tab[2] ^= t_x;

  tab[1] ^= t_y;
  tab[3] ^= t_y;

  tab[4] = t_x;
  tab[5] = t_y;

  return tab;
}
