inline
fn branch_permutation (reg u64 x) -> reg u64 {
  inline u32[5] save;
  inline int i;

  save[4] = (u32)[x];
  save[5] = (u32)[x + 4];
  save[3] = (u32)[x + 8];
  save[0] = (u32)[x + 12];
  save[1] = (u32)[x + 16];
  save[2] = (u32)[x + 20];

  for i=0 to 6 {
    (u32)[x + 4*i] = save[i];
  }

  return x;
}
